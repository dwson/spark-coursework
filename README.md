# spark-coursework
This is the GitHub repository for Apache Spark coursework (Group 11)

## Prerequisites
1. Clone GitHub repository using the following command  
    ```sh
    git clone https://github.com/dwson/spark-coursework
    ```
2. Change directory to the cloned folder
   ```sh
   cd spark-coursework
   ```
3. Place datasets **ml-latest** and **ml-latest-small** on the root directory of the folder.

## Usage
```sh
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py {<OPTION> <VALUE>}*
```
The program can handle multiple arguments like the following example.  

```spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -list-watches 20 -list-rating 15 -compare-movie-tastes 2,7```

It will print usage message if a given argument is wrong.

### Available options:
<Part 1>
```
-search-user-id      <>
-search-movie-id     <>
-search-movie-title  <>
-search-genre        <>
-search-year         <YYYY>
-list-rating         <Number>
-list-watches        <Number>
```

<Part 2>
```
-find-favourite-genre   <userId || group of userIds>
-compare-movie-tastes   <userId,userId>
```

The group of values should be delimited by commas.

### Examples:
<Part 1>
```
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -search-user-id 
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -search-movie-id
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -search-movie-title
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -search-genre 
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -search-year 2018
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -list-rating 10
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -list-watches 10
```

<Part 2>
```
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -find-favourite-genre  1
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -find-favourite-genre  1,2,3
spark-3.1.1-bin-hadoop3.2/bin/spark-submit src/main.py -compare-movie-tastes  14,27
```

### Outputs:
Results will be saved in the **output/** folder. It is generated by a built-in save function in Apache Spark.